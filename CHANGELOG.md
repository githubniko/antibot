# Changelog

## [0.6.2] - 2025-06-28

### Added
- Передача referer через utm_referrer
- Сохранение referer в localStorage в переменную originalReferrer

### Changed
- Исключен "Tag found" из логирования, для сокращении длины лог-файла


## [0.6.1] - 2025-06-24

### Changed
- Вернул настройки direct = , referer =


## [0.6.0] - 2025-06-23

### Added
- RefererChecker: Проверка рефереров по спискам (Allow/Block/Captcha)
- ASNChecker: добавлен список captcha_asn
- RequestChecker: добавлены списки Block/Captcha

### Changed
- RefererChecker: Удалены настройки direct = , referer =. В место них проверки по спискам
- ASNChecker: секции [asn_checker] и [asn_whilelist] объединены в одну [asn_checker]


## [0.5.3] - 2025-06-19

### Added
- Совместимость SQLite < 3.8.0
- Возможность вкл/выкл защиту из конфига, секция [main]
- Белый список по ASN

### Changed
- Не создавать файл листа, если модуль выключен

### Fixed
- При заходе Direct и Referer c действием ALLOW не ставилась метка
- При подключении через .htaccess происходил 2ой include в папке antibot/


## [0.5.0] - 2025-06-12

### Added
- Кэширование DNS запросов к TOR серверу
- Возможность блокировать/разрешать сети, диапазоны IP-адресов
- Блокировка по ASN

### Changed
- Скорректирован приоритет проверок

### Fixed
- Невозможно выключить секцию [http_checker] 
- Проблема получения списков TOR

## [0.4.1] - 2025-06-06

### Added
- Исключение для бота DuckDuckGo-Favicons-Bot
- Исключение для бота bing.com
- Исключение для бота msedge.net

### Fixed
- Устранена проблема загрузки blacklist_tor в CGI-режиме

## [0.4.0] - 2025-06-05

### Added
- Исключение для бота googlezip.net
- Поддержка заголовков X-Frame-Options и Content-Security-Policy для защиты от встраивания в iframe

### Changed
- Реструктуризация конфигурационного файла по модулям

### Fixed
- Исправлена ошибка 404 при запросе favicon.ico
- Устранены мелкие ошибки в модуле HTTPChecker

## [0.3.0] - 2025-06-02

### Added
- Интеграция с Яндекс.Метрикой
- Механизм блокировки по FingerPrint
- CSRF-защита для API
- Модуль проверки версии HTTP-протокола (HTTPChecker)
- Исключение для бота letsencrypt.org
- Поддержка кэширования DNS-запросов (файловое/Redis)

### Changed
- Реализован сброс меток для всех пользователей
- Страница блокировки теперь возвращает код 403
- Улучшена совместимость с Cloudflare и другими прокси-сервисами

### Fixed
- Исправлена работа в CLI/cron-режимах
- Оптимизирована ротация логов

## [0.2.0] - 2025-04-29

### Added
- Переход на ООП-архитектуру
- Реализация базовых модулей защиты